
defonce :val do
  OSCVal.new(8112)
end

defonce :out do
  #OSC::Client.new("192.168.15.14", 8112)
  OSC::Client.new("10.0.0.8", 8112)
end

defonce :out3 do
  OSC::Client.new("localhost", 8119)
end


beat = 0
loop do
  start = beat % 4
  size = start == 0 ? 0.8 : 0.5
  out.send(OSC::Message.new("/beat", size))
  puts "sent: #{size}"
  sleep 0.5
  sample :drum_heavy_kick, amp: size
  beat += 1
end


comment do
  loop do
    v = val.read("/palimpsest/left")
    puts v
    sleep 0.125

  end
end