in_thread do
  with_fx :echo do
    loop do

      sample :drum_heavy_kick, amp: 5
      sleep 0.5
    end
  end
end

with_fx :compressor do
  with_fx :wobble, wave: 2, filter: 1, res: 0.2, cutoff_min: 30, cutoff_max: 100, phase: 0.333333 do
    with_fx :wobble, wave: 0, filter: 0, res: 0.2, cutoff_min: 50, cutoff_max: 120, phase: 0.5 do |w|
      use_synth :dsaw
      play 30, sustain: 20, detune: 0.1, amp: 5
      sleep 5
      control w, wave: 1, res: 0.1
    end
  end
end